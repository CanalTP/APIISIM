2014-11-10 15:41:05,443;INFO;-- Init Planner (DB_URL: postgresql+psycopg2://postgres:postgres@localhost/afimb_stubs_db)
2014-11-10 15:41:05,520;INFO;Finding departure MIS...
2014-11-10 15:41:05,651;INFO;MISes surrounding point (2.369208 48.729012): set([1, 2])
2014-11-10 15:41:05,651;INFO;Departure MIS (mode compatibles): set([1, 2])
2014-11-10 15:41:05,651;INFO;Finding arrival MIS...
2014-11-10 15:41:05,661;INFO;MISes surrounding point (5.051595 47.332904): set([3])
2014-11-10 15:41:05,661;INFO;Arrival MIS (mode compatibles): set([3])
2014-11-10 15:41:05,677;INFO;MIS traces: [[1, 3], [2, 3], [2, 1, 3]]
2014-11-10 15:41:05,677;INFO;CalculationManager thread started
2014-11-10 15:41:05,677;INFO;WorkerThread started on job [1, 3]
2014-11-10 15:41:05,884;INFO;Detailing trace...
2014-11-10 15:41:05,884;INFO;Region 1 - MIS stub_transilien 
2014-11-10 15:41:05,884;INFO; + Org: stop_area:DUA:SA:59841 
2014-11-10 15:41:05,884;INFO; + Dst: stop_area:DUA:SA:49:53090 - stop_area:DUA:SA:81:6594 - stop_area:DUA:SA:59225 ...  
2014-11-10 15:41:05,884;INFO; + Lnk: stop_area:SCF:SA:SAOCE87681437 - stop_area:SCF:SA:SAOCE87381582 - stop_area:RAT:SA:STPAU ...  
2014-11-10 15:41:05,884;INFO;Region 2 - MIS stub_bourgogne 
2014-11-10 15:41:05,884;INFO; + Org: stop_area:SCF:SA:SAOCE87681437 - stop_area:SCF:SA:SAOCE87381582 - stop_area:RAT:SA:STPAU ...  
2014-11-10 15:41:05,884;INFO; + Dst: stop_area:CGD:SA:1137 
2014-11-10 15:41:05,884;INFO; + Lnk: None 
2014-11-10 15:41:05,884;INFO;Processing first pass (left->right) that optimize arrival time...
2014-11-10 15:41:15,734;INFO;Step 1 - stub_transilien : dep 2014-10-31 15:41:05.443000 arr 2014-10-31 15:48:33
2014-11-10 15:41:15,734;INFO;Step 1 - stub_transilien : Org stop_area:DUA:SA:59841
2014-11-10 15:41:15,734;INFO;Step 1 - stub_transilien : Dst stop_area:DUA:SA:8754524 - stop_area:DUA:SA:8754524 - stop_area:DUA:SA:4:189 ... 
2014-11-10 15:41:15,734;INFO;Step 1 - stub_transilien : Lnk stop_area:SCF:SA:SAOCE87545244 - stop_area:SCF:SA:SAOCE87496695 - stop_area:SCF:SA:SAOCE87681825 ... 
2014-11-10 15:41:23,808;INFO;Step 2 - stub_bourgogne : dep 2014-10-31 15:48:33 arr 2014-10-31 21:15:20
2014-11-10 15:41:23,808;INFO;Step 2 - stub_bourgogne : Org stop_area:SCF:SA:SAOCE87682302
2014-11-10 15:41:23,808;INFO;Step 2 - stub_bourgogne : Dst stop_area:CGD:SA:1137
2014-11-10 15:41:23,808;INFO;Step 2 - stub_bourgogne : Lnk None
2014-11-10 15:41:23,808;INFO;Processing second pass (right->left) that optimize departure time
2014-11-10 15:41:23,809;INFO;Step 3 - stub_bourgogne : dep 2014-10-31 15:48:33 arr 2014-10-31 21:15:20
2014-11-10 15:41:23,809;INFO;Step 3 - stub_bourgogne : Dst stop_area:CGD:SA:1137
2014-11-10 15:41:23,809;INFO;Step 3 - stub_bourgogne : Org stop_area:SCF:SA:SAOCE87682302
2014-11-10 15:41:23,809;INFO;Step 3 - stub_bourgogne : Lnk stop_area:DUA:SA:8768230
2014-11-10 15:41:23,859;ERROR;compute_trip([1, 3]): argument of type 'NoneType' is not iterable
Traceback (most recent call last):
  File "D:\gitlinux\APIISIM\source\apiisim\planner\planner_process.py", line 45, in run
    trip_calculator.compute_trip(trace)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 137, in decorator
    result = func(*args, **kwargs)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 885, in compute_trip
    ret = self._departure_at_trip(detailed_trace, trace_id, providers)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 672, in _departure_at_trip
    resp = mis_api.get_itinerary(detailed_request)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 384, in get_itinerary
    ret.DetailedTrip = parse_detailed_trip(content.get("DetailedTrip", None))
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 196, in parse_detailed_trip
    ret.sections = parse_sections(trip["sections"])
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 222, in parse_sections
    if "Line" in p:
TypeError: argument of type 'NoneType' is not iterable

2014-11-10 15:41:23,861;INFO;WorkerThread started on job [2, 3]
2014-11-10 15:41:25,292;INFO;Detailing trace...
2014-11-10 15:41:25,292;INFO;Region 1 - MIS stub_pays_de_la_loire 
2014-11-10 15:41:25,292;INFO; + Org: stop_area:DUA:SA:59841 
2014-11-10 15:41:25,292;INFO; + Dst: stop_area:SNC:SA:SAOCE87215756 - stop_area:SNC:SA:SAOCE87478107 - stop_area:SNC:SA:SAOCE87758797 ...  
2014-11-10 15:41:25,292;INFO; + Lnk: stop_area:SCF:SA:SAOCE87215756 - stop_area:SCF:SA:SAOCE87478107 - stop_area:SCF:SA:SAOCE87393702 ...  
2014-11-10 15:41:25,292;INFO;Region 2 - MIS stub_bourgogne 
2014-11-10 15:41:25,292;INFO; + Org: stop_area:SCF:SA:SAOCE87215756 - stop_area:SCF:SA:SAOCE87478107 - stop_area:SCF:SA:SAOCE87393702 ...  
2014-11-10 15:41:25,292;INFO; + Dst: stop_area:CGD:SA:1137 
2014-11-10 15:41:25,292;INFO; + Lnk: None 
2014-11-10 15:41:25,292;INFO;Processing first pass (left->right) that optimize arrival time...
2014-11-10 15:41:33,948;ERROR;POST <http://127.0.0.1:5000/stub_pays_de_la_loire/v0/summed_up_itineraries.json> FAILED: 500
2014-11-10 15:41:33,948;ERROR;compute_trip([2, 3]): <get_summed_up_itineraries> INTERNAL_ERROR
Traceback (most recent call last):
  File "D:\gitlinux\APIISIM\source\apiisim\planner\planner_process.py", line 45, in run
    trip_calculator.compute_trip(trace)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 137, in decorator
    result = func(*args, **kwargs)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 885, in compute_trip
    ret = self._departure_at_trip(detailed_trace, trace_id, providers)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 548, in _departure_at_trip
    resp = mis_api.get_summed_up_itineraries(summed_up_request)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 410, in get_summed_up_itineraries
    raise Exception("<get_summed_up_itineraries> %s" % ret.Status.Code)
Exception: <get_summed_up_itineraries> INTERNAL_ERROR

2014-11-10 15:41:33,959;INFO;WorkerThread started on job [2, 1, 3]
2014-11-10 15:41:34,450;INFO;Detailing trace...
2014-11-10 15:41:34,450;INFO;Region 1 - MIS stub_pays_de_la_loire 
2014-11-10 15:41:34,450;INFO; + Org: stop_area:DUA:SA:59841 
2014-11-10 15:41:34,450;INFO; + Dst: stop_area:SNC:SA:SAOCE87393363 - stop_area:SNC:SA:SAOCE87382465 - stop_area:SNC:SA:SAOCE87382655 ...  
2014-11-10 15:41:34,450;INFO; + Lnk: stop_area:DUA:SA:8739336 - stop_area:DUA:SA:15:22 - stop_area:DUA:SA:40:455 ...  
2014-11-10 15:41:34,450;INFO;Region 2 - MIS stub_transilien 
2014-11-10 15:41:34,450;INFO; + Org: stop_area:DUA:SA:8739336 - stop_area:DUA:SA:15:22 - stop_area:DUA:SA:40:455 ...  
2014-11-10 15:41:34,450;INFO; + Dst: stop_area:DUA:SA:49:53090 - stop_area:DUA:SA:81:6594 - stop_area:DUA:SA:59225 ...  
2014-11-10 15:41:34,450;INFO; + Lnk: stop_area:SCF:SA:SAOCE87681437 - stop_area:SCF:SA:SAOCE87381582 - stop_area:RAT:SA:STPAU ...  
2014-11-10 15:41:34,450;INFO;Region 3 - MIS stub_bourgogne 
2014-11-10 15:41:34,450;INFO; + Org: stop_area:SCF:SA:SAOCE87681437 - stop_area:SCF:SA:SAOCE87381582 - stop_area:RAT:SA:STPAU ...  
2014-11-10 15:41:34,450;INFO; + Dst: stop_area:CGD:SA:1137 
2014-11-10 15:41:34,450;INFO; + Lnk: None 
2014-11-10 15:41:34,450;INFO;Processing first pass (left->right) that optimize arrival time...
2014-11-10 15:41:34,535;ERROR;POST <http://127.0.0.1:5000/stub_pays_de_la_loire/v0/summed_up_itineraries.json> FAILED: 500
2014-11-10 15:41:34,536;ERROR;compute_trip([2, 1, 3]): <get_summed_up_itineraries> INTERNAL_ERROR
Traceback (most recent call last):
  File "D:\gitlinux\APIISIM\source\apiisim\planner\planner_process.py", line 45, in run
    trip_calculator.compute_trip(trace)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 137, in decorator
    result = func(*args, **kwargs)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 885, in compute_trip
    ret = self._departure_at_trip(detailed_trace, trace_id, providers)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\plan_trip_calculator.py", line 548, in _departure_at_trip
    resp = mis_api.get_summed_up_itineraries(summed_up_request)
  File "D:\gitlinux\APIISIM\source\apiisim\planner\__init__.py", line 410, in get_summed_up_itineraries
    raise Exception("<get_summed_up_itineraries> %s" % ret.Status.Code)
Exception: <get_summed_up_itineraries> INTERNAL_ERROR

2014-11-10 15:41:34,539;INFO;CalculationManager thread finished
2014-11-10 15:41:34,539;INFO;Request finished
2014-11-10 15:41:34,539;INFO;WorkerThread finished
2014-11-10 15:41:34,539;INFO;WorkerThread finished
2014-11-10 15:41:34,539;INFO;WorkerThread finished
2014-11-10 15:41:34,540;INFO;-- Notification received: {"PlanTripResponse": {"clientRequestId": "request_34496", "Status": "0", "errors": []}}
2014-11-10 15:41:34,540;INFO;-- Notification received: {"StartingSearch": {"RequestId": "request_34496", "MaxComposedTripSearched": 3}}
2014-11-10 15:41:34,542;INFO;-- Notification received: {"PlanTripExistenceNotificationResponseType": {"Arrival": {"PlaceTypeId": "stop_area:CGD:SA:1137", "Position": {"Latitude": 47.332904, "Longitude": 5.051595}}, "DepartureTime": "2014-10-31T15:41:05", "ComposedTripId": "1_3", "RequestId": "request_34496", "ArrivalTime": "2014-10-31T21:15:20", "Duration": "PT5H34M14S", "providers": [{"Url": "http://127.0.0.1:5000/stub_transilien/v0/", "Name": "stub_transilien"}, {"Url": "http://127.0.0.1:5000/stub_bourgogne/v0/", "Name": "stub_bourgogne"}], "Departure": {"PlaceTypeId": "stop_area:DUA:SA:59841", "Position": {"Latitude": 48.729012, "Longitude": 2.369208}}}}
2014-11-10 15:41:34,542;INFO;-- Notification received: {"EndingSearch": {"Status": "0", "ExistenceNotificationsSent": 0, "RequestId": "request_34496", "MaxComposedTripSearched": 3, "NotificationsSent": 0}}
2014-11-10 15:41:34,542;INFO;-- Planner shutdown
